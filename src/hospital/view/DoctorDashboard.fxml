<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>

<BorderPane xmlns:fx="http://javafx.com/fxml"
            fx:controller="hospital.controller.DoctorDashboardController"
            prefWidth="1000" prefHeight="700"
            style="-fx-background-color: #f4f7fb;">

    <!-- ✅ Top Bar (same style as Admin Dashboard) -->
    <top>
        <HBox spacing="10" style="-fx-background-color: #1976d2;">
            <padding>
                <Insets top="10" right="10" bottom="10" left="10"/>
            </padding>

            <!-- Dashboard Title -->
            <Label text="👨‍⚕️ Doctor Dashboard"
                   style="-fx-text-fill: white; -fx-font-size: 18px; -fx-font-weight: bold;"/>

            <Pane HBox.hgrow="ALWAYS" />

            <!-- Logout Button -->
            <Button fx:id="btnLogout"
                    text="Logout"
                    onAction="#handleLogout"
                    style="-fx-background-color: white; -fx-text-fill: #1976d2; -fx-font-weight: bold;"/>
        </HBox>
    </top>

    <!-- Center Content -->
    <center>
        <SplitPane dividerPositions="0.35,0.65">
            <!-- Left: Patients List -->
            <VBox spacing="10">
                <padding>
                    <Insets top="15" right="15" bottom="15" left="15"/>
                </padding>
                <Label text="Patients"
                       style="-fx-font-size: 18px; -fx-font-weight: bold;"/>

                <TableView fx:id="tblPatients" prefHeight="600">
                    <columns>
                        <TableColumn text="ID" fx:id="colId" prefWidth="50"/>
                        <TableColumn text="Name" fx:id="colName" prefWidth="120"/>
                        <TableColumn text="Age" fx:id="colAge" prefWidth="60"/>
                        <TableColumn text="Gender" fx:id="colGender" prefWidth="80"/>
                    </columns>
                </TableView>
            </VBox>

            <!-- Center: Reports -->
            <VBox spacing="10">
                <padding>
                    <Insets top="15" right="15" bottom="15" left="15"/>
                </padding>

                <Label fx:id="lblSelectedPatient"
                       text="Select a patient to view reports"
                       style="-fx-font-size: 18px; -fx-font-weight: bold;"/>

                <TableView fx:id="tblReports" prefHeight="600">
                    <columns>
                        <TableColumn text="Report ID" fx:id="colReportId" prefWidth="100"/>
                        <TableColumn text="Test Type" fx:id="colTestType" prefWidth="150"/>
                        <TableColumn text="Result" fx:id="colResult" prefWidth="200"/>
                        <TableColumn text="Date" fx:id="colReportDate" prefWidth="120"/>
                        <TableColumn text="Status" fx:id="colStatus" prefWidth="100"/>
                    </columns>
                </TableView>
            </VBox>

            <!-- Right: Prescription Box -->
            <VBox spacing="10">
                <padding>
                    <Insets top="15" right="15" bottom="15" left="15"/>
                </padding>

                <Label text="Prescription"
                       style="-fx-font-size: 18px; -fx-font-weight: bold;"/>

                <TextArea fx:id="txtPrescription"
                          promptText="Enter prescription here..."
                          wrapText="true"
                          prefHeight="250"
                          style="-fx-background-radius: 10; -fx-border-color: #b0bec5; -fx-border-radius: 10; -fx-padding: 10;"/>

                <Button text="Save Prescription"
                        onAction="#handleSavePrescription"
                        style="-fx-background-color: linear-gradient(to right, #43a047, #66bb6a);
                               -fx-text-fill: white; -fx-font-weight: bold;
                               -fx-background-radius: 10; -fx-padding: 8 20; -fx-cursor: hand;"
                        onMouseEntered="#handleMouseEnter"
                        onMouseExited="#handleMouseExit"/>

                <Label text="Prescription History"
                       style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-padding: 10 0 0 0;"/>

                <ScrollPane fitToWidth="true" fitToHeight="true" prefHeight="300">
                    <content>
                        <TableView fx:id="tblPrescriptionHistory" prefHeight="300">
                            <columns>
                                <TableColumn fx:id="colDoctor" text="Doctor" prefWidth="120" />
                                <TableColumn fx:id="colPrescription" text="Prescription" prefWidth="200" />
                                <TableColumn fx:id="colDate" text="Date" prefWidth="150" />
                            </columns>
                        </TableView>
                    </content>
                </ScrollPane>
            </VBox>
        </SplitPane>
    </center>
</BorderPane>
